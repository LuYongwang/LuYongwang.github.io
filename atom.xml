<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lä¸¶luluâ€˜s Blog</title>
  
  <subtitle>æ•¬å¾€äº‹ä¸€æ¯é…’,å†çˆ±æˆ‘ä¹Ÿä¸å›å¤´ğŸŒ¹</subtitle>
  <link href="https://blog.yongwang.lu/atom.xml" rel="self"/>
  
  <link href="https://blog.yongwang.lu/"/>
  <updated>2022-10-01T06:44:53.000Z</updated>
  <id>https://blog.yongwang.lu/</id>
  
  <author>
    <name>Lä¸¶lulu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Elasticsearch - (1)æ¦‚è¿°å’Œå®‰è£…</title>
    <link href="https://blog.yongwang.lu/post/Elasticsearch1.html"/>
    <id>https://blog.yongwang.lu/post/Elasticsearch1.html</id>
    <published>2022-10-01T06:44:53.000Z</published>
    <updated>2022-10-01T06:44:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Elasticsearch-æ¦‚è¿°å’Œå®‰è£…"><a href="#Elasticsearch-æ¦‚è¿°å’Œå®‰è£…" class="headerlink" title="Elasticsearch - æ¦‚è¿°å’Œå®‰è£…"></a>Elasticsearch - æ¦‚è¿°å’Œå®‰è£…</h1><p><code>æœ¬æ–‡æ‰€æœ‰æ“ä½œç”Ÿæ•ˆäº 2022-10-01 æœ€æ–°ç‰ˆæœ¬elasticsearch:8.4.2 æ“ä½œç³»ç»Ÿä¸ºMac m1pro </code> è¿™é‡Œåªè®²è¿°, å­¦ä¹ è¿‡ç¨‹ä¸­çš„åŸºæœ¬ç¯å¢ƒå®‰è£…,å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒé«˜å¯ç”¨é›†ç¾¤æ­å»º. åç»­çœ‹å•ç‹¬éƒ¨ç½²æ–‡ç« .</p><h2 id="Elasticsearchæ¦‚è¿°"><a href="#Elasticsearchæ¦‚è¿°" class="headerlink" title="Elasticsearchæ¦‚è¿°"></a>Elasticsearchæ¦‚è¿°</h2><h3 id="å®˜ç½‘å’Œæ–‡æ¡£"><a href="#å®˜ç½‘å’Œæ–‡æ¡£" class="headerlink" title="å®˜ç½‘å’Œæ–‡æ¡£"></a>å®˜ç½‘å’Œæ–‡æ¡£</h3><p><a href="https://www.elastic.co/">https://www.elastic.co</a></p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-intro.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-intro.html</a></p><h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p><em><strong>Elasticsearch</strong></em>æ˜¯ä¸€ä¸ªè¿‘å®æ—¶çš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ ç”¨å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å»å¤„ç†å¤§è§„æ¨¡æ•°æ®, å®ƒä¸ä½†ç¨³å®šã€å¯é ã€å¿«é€Ÿï¼Œè€Œä¸”ä¹Ÿå…·æœ‰è‰¯å¥½çš„æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼Œæ˜¯ä¸“é—¨ä¸ºåˆ†å¸ƒå¼ç¯å¢ƒè®¾è®¡çš„,å®ƒå¯ä»¥ç”¨äºå…¨æ–‡æœç´¢ï¼Œç»“æ„åŒ–æœç´¢ä»¥åŠåˆ†æï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å°†è¿™ä¸‰è€…è¿›è¡Œç»„åˆã€‚Elasticsearchæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨å…¨æ–‡æœç´¢å¼•æ“ Apache Lucene åŸºç¡€ä¸Šçš„æœç´¢å¼•æ“ï¼Œå¯ä»¥è¯´Luceneæ˜¯å½“ä»Šæœ€å…ˆè¿›ï¼Œæœ€é«˜æ•ˆçš„å…¨åŠŸèƒ½å¼€æºæœç´¢å¼•æ“æ¡†æ¶.</p><img src="https://res.yongwang.lu/img/202209301525318.png"/><h3 id="å‘å±•å†ç¨‹"><a href="#å‘å±•å†ç¨‹" class="headerlink" title="å‘å±•å†ç¨‹"></a>å‘å±•å†ç¨‹</h3><h2 id="Elasticsearchå®‰è£…"><a href="#Elasticsearchå®‰è£…" class="headerlink" title="Elasticsearchå®‰è£…"></a>Elasticsearchå®‰è£…</h2><h3 id="æœ¬åœ°å®‰è£…"><a href="#æœ¬åœ°å®‰è£…" class="headerlink" title="æœ¬åœ°å®‰è£…"></a>æœ¬åœ°å®‰è£…</h3><h4 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h4><p><a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">https://www.elastic.co/cn/downloads/past-releases#elasticsearch</a></p><img src="https://res.yongwang.lu/img/image-20220930114527010.png" alt="image-20220930114527010" style="zoom: 33.5%;" /><img src="https://res.yongwang.lu/img/image-20220930114329496.png" alt="image-20220930114329496" style="zoom:50%;" /><h4 id="å®‰è£…å¯åŠ¨è¿‡ç¨‹"><a href="#å®‰è£…å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="å®‰è£…å¯åŠ¨è¿‡ç¨‹"></a>å®‰è£…å¯åŠ¨è¿‡ç¨‹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½å¯¹åº”tar.gzåŒ… æ”¾åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">yongwang.lu@bogon[~/DevSoft] tree .</span><br><span class="line">.</span><br><span class="line">â””â”€â”€ elasticsearch-8.4.2-darwin-aarch64.tar.gz</span><br><span class="line"></span><br><span class="line">0 directories, 1 file</span><br><span class="line"> yongwang.lu@bogon[~/DevSoft] tar -zxf elasticsearch-8.4.2-darwin-aarch64.tar.gz</span><br><span class="line"> yongwang.lu@bogon[~/DevSoft] <span class="built_in">ls</span> -l</span><br><span class="line">total 721008</span><br><span class="line">drwxr-xr-x@ 12 yongwang.lu  staff        384  9 15 00:30 elasticsearch-8.4.2</span><br><span class="line">-rw-r--r--@  1 yongwang.lu  staff  357145358  9 30 11:50 elasticsearch-8.4.2-darwin-aarch64.tar.gz</span><br><span class="line"> yongwang.lu@bogon[~/DevSoft] <span class="built_in">cd</span> elasticsearch-8.4.2</span><br><span class="line"> yongwang.lu@bogon[~/DevSoft/elasticsearch-8.4.2] <span class="built_in">ls</span> -l</span><br><span class="line">total 4296</span><br><span class="line">-rw-r--r--@  1 yongwang.lu  staff     3860  9 15 00:25 LICENSE.txt</span><br><span class="line">-rw-r--r--@  1 yongwang.lu  staff  2187100  9 15 00:29 NOTICE.txt</span><br><span class="line">-rw-r--r--@  1 yongwang.lu  staff     8107  9 15 00:25 README.asciidoc</span><br><span class="line">drwxr-xr-x@ 24 yongwang.lu  staff      768  9 15 00:30 bin</span><br><span class="line">drwxr-xr-x@ 11 yongwang.lu  staff      352  9 15 00:30 config</span><br><span class="line">drwxr-xr-x@  3 yongwang.lu  staff       96  9 15 00:30 jdk.app</span><br><span class="line">drwxr-xr-x@ 36 yongwang.lu  staff     1152  9 15 00:30 lib</span><br><span class="line">drwxr-xr-x@  2 yongwang.lu  staff       64  9 15 00:29 logs</span><br><span class="line">drwxr-xr-x@ 66 yongwang.lu  staff     2112  9 15 00:30 modules</span><br><span class="line">drwxr-xr-x@  2 yongwang.lu  staff       64  9 15 00:29 plugins</span><br><span class="line"> yongwang.lu@bogon[~/DevSoft/elasticsearch-8.4.2] ./bin/elasticsearch</span><br><span class="line"> <span class="comment"># ä¸­é—´æ—¥å¿—çœç•¥</span></span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><br><span class="line">âœ… Elasticsearch security features have been automatically configured!</span><br><span class="line">âœ… Authentication is enabled and cluster connections are encrypted.</span><br><span class="line"></span><br><span class="line">â„¹ï¸  Password <span class="keyword">for</span> the elastic user (reset with `bin/elasticsearch-reset-password -u elastic`):</span><br><span class="line">  rGXkiS7wwOP9ApnMaTzJ</span><br><span class="line"></span><br><span class="line">â„¹ï¸  HTTP CA certificate SHA-256 fingerprint:</span><br><span class="line">  efdf407f44f069ca5f806ea1a6b51d37f5093a3fff89197194172ac2a69638ee</span><br><span class="line"></span><br><span class="line">â„¹ï¸  Configure Kibana to use this cluster:</span><br><span class="line">â€¢ Run Kibana and click the configuration <span class="built_in">link</span> <span class="keyword">in</span> the terminal when Kibana starts.</span><br><span class="line">â€¢ Copy the following enrollment token and <span class="built_in">paste</span> it into Kibana <span class="keyword">in</span> your browser (valid <span class="keyword">for</span> the next 30 minutes):</span><br><span class="line">  eyJ2ZXIiOiI4LjQuMiIsImFkciI6WyIxNzIuMTcuOTMuNDA6OTIwMCJdLCJmZ3IiOiJlZmRmNDA3ZjQ0ZjA2OWNhNWY4MDZlYTFhNmI1MWQzN2Y1MDkzYTNmZmY4OTE5NzE5NDE3MmFjMmE2OTYzOGVlIiwia2V5IjoiX29mdGpJTUJfeDFUUVU0WFdJTUg6TVJaM2Y2V0ZTTHF5Nlk3LVZsbmVSQSJ9</span><br><span class="line"></span><br><span class="line">â„¹ï¸  Configure other nodes to <span class="built_in">join</span> this cluster:</span><br><span class="line">â€¢ On this node:</span><br><span class="line">  âƒ Create an enrollment token with `bin/elasticsearch-create-enrollment-token -s node`.</span><br><span class="line">  âƒ Uncomment the transport.host setting at the end of config/elasticsearch.yml.</span><br><span class="line">  âƒ Restart Elasticsearch.</span><br><span class="line">â€¢ On other nodes:</span><br><span class="line">  âƒ Start Elasticsearch with `bin/elasticsearch --enrollment-token &lt;token&gt;`, using the enrollment token that you generated.</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æœ€ç®€å•çš„å®‰è£…æˆåŠŸäº†.  </p><h4 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl <span class="string">&quot;https://127.0.0.1:9200/&quot;</span> --header <span class="string">&quot;Authorization: Basic ZWxhc3RpYzpyR1hraVM3d3dPUDlBcG5NYVR6Sg==&quot;</span> -k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span> : <span class="string">&quot;bogon&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;elasticsearch&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;xOqEJgnDROCrmf0svgiVHg&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;number&quot;</span> : <span class="string">&quot;8.4.2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_flavor&quot;</span> : <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_type&quot;</span> : <span class="string">&quot;tar&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_hash&quot;</span> : <span class="string">&quot;89f8c6d8429db93b816403ee75e5c270b43a940a&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_date&quot;</span> : <span class="string">&quot;2022-09-14T16:26:04.382547801Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;lucene_version&quot;</span> : <span class="string">&quot;9.3.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_wire_compatibility_version&quot;</span> : <span class="string">&quot;7.17.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_index_compatibility_version&quot;</span> : <span class="string">&quot;7.0.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»Elasticsearch8å¼€å§‹é»˜è®¤å¼€å¯è¯ä¹¦å’Œè´¦å·å¯†ç é…ç½®. <code>Authorization: Basic ZWxhc3RpYzpyR1hraVM3d3dPUDlBcG5NYVR6Sg==</code> è¯·æ±‚å¤´æ˜¯è´¦å·å¯†ç ä¼ å…¥. æœ¬æ–‡ä¸ä¼šå®‰è£…kibanaç­‰å·¥å…·æ¥è¾…åŠ©.</p><p>ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¥å¿—ä¸­ æ‹¿åˆ°å¯†ç  base64(username:passwd) åˆ™ base64(elastic:rGXkiS7wwOP9ApnMaTzJ)</p><h3 id="IKåˆ†è¯å™¨å®‰è£…"><a href="#IKåˆ†è¯å™¨å®‰è£…" class="headerlink" title="IKåˆ†è¯å™¨å®‰è£…"></a>IKåˆ†è¯å™¨å®‰è£…</h3><p>æ’ä»¶githubåœ°å€ <a href="https://github.com/medcl/elasticsearch-analysis-ik">https://github.com/medcl/elasticsearch-analysis-ik</a></p><h4 id="æ’ä»¶å®‰è£…"><a href="#æ’ä»¶å®‰è£…" class="headerlink" title="æ’ä»¶å®‰è£…"></a>æ’ä»¶å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.2/elasticsearch-analysis-ik-8.4.2.zip</span><br><span class="line">-&gt; Installing https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.2/elasticsearch-analysis-ik-8.4.2.zip</span><br><span class="line">-&gt; Downloading https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.2/elasticsearch-analysis-ik-8.4.2.zip</span><br><span class="line">[=================================================] 100%</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç½‘ç»œä¸å¥½å¯ä»¥å¢åŠ githubä»£ç†  <a href="https://ghproxy.com/https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.2/elasticsearch-analysis-ik-8.4.2.zip">https://ghproxy.com/https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.4.2/elasticsearch-analysis-ik-8.4.2.zip</a></p><p><code>æ³¨æ„: è¿™é‡Œç‰ˆæœ¬å·å’Œeså¿…é¡»ä¿æŒå¼ºä¸€è‡´, å¦åˆ™ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯</code> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Plugin [analysis-ik] was built for Elasticsearch version 8.4.1 but version 8.4.2 is running</span><br></pre></td></tr></table></figure><p>é‡å¯Es æ³¨æ„è§‚å¯Ÿæ—¥å¿— å‡ºç° <code>loaded plugin [analysis-ik]</code>åˆ™è¯´æ˜åŠ è½½æˆåŠŸ.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[2022-10-01T14:21:51,107][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-shutdown]</span><br><span class="line">[2022-10-01T14:21:51,107][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-sql]</span><br><span class="line">[2022-10-01T14:21:51,107][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-stack]</span><br><span class="line">[2022-10-01T14:21:51,108][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-text-structure]</span><br><span class="line">[2022-10-01T14:21:51,108][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-voting-only-node]</span><br><span class="line">[2022-10-01T14:21:51,108][INFO ][o.e.p.PluginsService     ] [bogon] loaded module [x-pack-watcher]</span><br><span class="line">[2022-10-01T14:21:51,108][INFO ][o.e.p.PluginsService     ] [bogon] loaded plugin [analysis-ik]</span><br><span class="line">[2022-10-01T14:21:52,227][INFO ][o.e.e.NodeEnvironment    ] [bogon] using [1] data paths, mounts [[/System/Volumes/Data (/dev/disk3s5)]], net usable_space [763.5gb], net total_space [926.3gb], types [apfs]</span><br></pre></td></tr></table></figure><h4 id="æ’ä»¶æµ‹è¯•"><a href="#æ’ä»¶æµ‹è¯•" class="headerlink" title="æ’ä»¶æµ‹è¯•"></a>æ’ä»¶æµ‹è¯•</h4><h5 id="ik-max-word"><a href="#ik-max-word" class="headerlink" title="ik_max_word"></a><strong>ik_max_word</strong></h5><p>æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ† ä¾‹å¦‚: <code>åº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹73å‘¨å¹´</code>. ä¼šæ‹†åˆ†æˆ:  åº†ç¥ ä¸­åäººæ°‘å…±å’Œå›½ ä¸­åäººæ°‘ ä¸­å åäºº äººæ°‘å…±å’Œå›½ äººæ°‘ å…±å’Œå›½</p><p>å…±å’Œ å›½ æˆç«‹ 73 å‘¨å¹´ å‘¨ å¹´</p><p>è¯·æ±‚å¦‚ä¸‹: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">curl -k -X GET <span class="string">&#x27;https://127.0.0.1:9200/_analyze&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Authorization: Basic ZWxhc3RpYzpyR1hraVM3d3dPUDlBcG5NYVR6Sg==&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data-raw <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;analyzer&quot;: &quot;ik_max_word&quot;,</span></span><br><span class="line"><span class="string">    &quot;text&quot;: &quot;åº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹73å‘¨å¹´&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> | jq</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;tokens&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;åº†ç¥&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 0,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;ä¸­åäººæ°‘&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 6,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 2</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;ä¸­å&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 4,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 3</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;åäºº&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 3,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 5,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 4</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;äººæ°‘å…±å’Œå›½&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 4,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 5</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;äººæ°‘&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 4,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 6,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 6</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å…±å’Œå›½&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 6,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 7</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å…±å’Œ&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 6,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 8,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 8</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å›½&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 8,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_CHAR&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 9</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;æˆç«‹&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 11,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 10</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;73&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 11,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 13,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;ARABIC&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 11</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å‘¨å¹´&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 13,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 15,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;COUNT&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 12</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å‘¨&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 13,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 14,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;COUNT&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 13</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;å¹´&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 14,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 15,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;COUNT&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 14</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ik-smart"><a href="#ik-smart" class="headerlink" title="ik_smart"></a><strong>ik_smart</strong></h5><p>ä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ† </p><p>ä¾‹å¦‚: <code>åº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹73å‘¨å¹´</code>. ä¼šæ‹†åˆ†æˆ:  åº†ç¥  ä¸­åäººæ°‘å…±å’Œå›½ æˆç«‹  73å‘¨å¹´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">curl -k -X GET <span class="string">&#x27;https://127.0.0.1:9200/_analyze&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Authorization: Basic ZWxhc3RpYzpyR1hraVM3d3dPUDlBcG5NYVR6Sg==&#x27;</span> \</span><br><span class="line">--header <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">--data-raw <span class="string">&#x27;&#123;</span></span><br><span class="line"><span class="string">    &quot;analyzer&quot;: &quot;ik_smart&quot;,</span></span><br><span class="line"><span class="string">    &quot;text&quot;: &quot;åº†ç¥ä¸­åäººæ°‘å…±å’Œå›½æˆç«‹73å‘¨å¹´&quot;</span></span><br><span class="line"><span class="string">&#125;&#x27;</span> | jq</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;tokens&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;åº†ç¥&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 0,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 2,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;æˆç«‹&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 9,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 11,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;CN_WORD&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 2</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;token&quot;</span>: <span class="string">&quot;73å‘¨å¹´&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start_offset&quot;</span>: 11,</span><br><span class="line">      <span class="string">&quot;end_offset&quot;</span>: 15,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;TYPE_CQUAN&quot;</span>,</span><br><span class="line">      <span class="string">&quot;position&quot;</span>: 3</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">Elasticsearch8.x</summary>
    
    
    
    <category term="Elasticsearch" scheme="https://blog.yongwang.lu/categories/Elasticsearch/"/>
    
    
    <category term="Elasticsearch" scheme="https://blog.yongwang.lu/tags/Elasticsearch/"/>
    
  </entry>
  
</feed>
